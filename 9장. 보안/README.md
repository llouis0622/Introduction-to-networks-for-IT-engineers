# 9장. 보안

# 1. 보안의 개념과 정의

## 1. 정보 보안의 정의

- 다양한 위협으로부터 보안을 보호하는 것
- 기밀성(Confidentiality) : 인가되지 않은 사용자가 정보를 보지 못하게 하는 모든 작업
- 무결성(Integrity) : 정확하고 완전한 정보 유지에 필요한 모든 작업
    - MD5, SHA와 같은 해시(Hash) 함수를 이용해 변경 여부 파악
- 가용성(Availability) : 정보가 필요할 때 접근을 허락하는 일련의 작업
- 진정성(Authenticity), 책임성(Accountability), 부인 방지(Non-Repudiation), 신뢰성(Reliability)

## 2. 네트워크의 정보 보안

- IT 종사자 입장 : 정보를 수집, 가공, 저장, 검색, 송수신하는 도중에 정보의 훼손, 변조, 유출을 막기 위한 관리적, 기술적 방법
- 네트워크 입장 : 수집된 정보를 침해하는 행동을 기술적으로 방어하거나 정보의 송수신 과정에 생기는 사고를 막기 위한 작업

## 3. 네트워크 보안의 주요 개념

- 트러스트(Trust) 네트워크 : 외부로부터 보호받아야 할 네트워크
- 언트러스트(Untrust) 네트워크 : 신뢰할 수 없는 외부 네트워크
- 인터넷 시큐어 게이트웨이(Internet Secure Gateway) : 트러스트 네트워크에서 언트러스트 네트워크로의 통신 통제
    - 정보와 요청 패킷을 적절히 인식하고 필터링
    - SWG(Secure Web Gateway), 웹 필터(Web Filter), 애플리케이션 컨트롤(Application Control), 샌드박스(Sandbox)
- 데이터 센터 시큐어 게이트웨이(Data Center Secure Gateway) : 언트러스트 네트워크에서 트러스트로의 통신 통제
    - 상대적으로 고성능 필요
    - 인터넷 관련 정보보다 공격 관련 정보가 더 중요
    - 방화벽, IPS, DCSG(DataCenter Secure Gateway), WAF(Web Application Firewall), Anti-DDoS(Distribute Denial of Service)

### 1. 네트워크 보안 정책 수립에 따른 분류

- 화이트리스트(White List) : 방어에 문제가 없다고 명확히 판단되는 통신만 허용
    - 일반적으로 IP와 통신 정보에 대해 명확히 하는 경우에 사용
- 블랙리스트(Black List) : 공격이라고 명확히 판단되거나 문제가 있었던 IP 리스트나 패킷 리스트를 기반으로 데이터베이스를 만들고 그 정보를 이용해 방어하는 형태
    - 공격 패턴(Signature)

### 2. 정탐, 오탐, 미탐(탐지 에러 타입)

|  | 공격 상황 | 정상 상황 |
| --- | --- | --- |
| 공격 인지 | True Positive(정상 탐지) | False Positive(오 탐지) |
| 정상 인지 | True Negative(미 탐지) | False Negative(정상 탐지) |

# 2. 보안 솔루션의 종류

- DDos → 방화벽 → IPS → WAF 형태

## 1. DDoS 방어 장비

- Denial of Service
- 다양한 방법으로 공격 목표에 서비스 부하를 가해 정상적인 서비스를 방해하는 공격 기법
- 데이터 센터 네트워크 내부와 외부의 경계에서 공격 방어
- 볼류메트릭 공격(Volumetric Attack) : 회선 사용량이나 그 이상의 트래픽을 과도하게 발생시켜 회선 사용을 방해하는 공격

## 2. 방화벽

- 3, 4계층 정보를 기반으로 정책
- 해당 정책과 매치되는 패킷이 방화벽을 통과하면 그 패킷을 허용하거나 거부

## 3. IDS, IPS

- IDS(Intrusion Detection System) : 침입 탐지 시스템
- IPS(Intrusion Prevention System) : 침입 방지 시스템
- 방화벽에서 방어할 수 없는 다양한 애플리케이션 공격을 방어하는 장비

## 4. WAF(Web Application Firewall)

- 웹 서버를 보호하는 전용 보안 장비
- HTTP, HTTPS처럼 웹 서버에서 동작하는 웹 프로토콜의 공격 방어
- 전용 네트워크 장비
- 웹 서버 플러그인
- ADC 플러그인
- 프록시 장비 플러그인
- IPS 회피 공격(Evasion Attack) 방어

## 5. 샌드박스

- APT(Advanced Persistent Threat) : 지능형 지속 공격
- ATA(Advanced Target Attack) : 지능형 표적 공격
- 악성 코드를 샌드박스 시스템 안에서 직접 실행

## 6. NAC(Network Access Control)

- 네트워크에 접속하는 장치 제어
- 인가된 사용자만 내부망에 접속할 수 있고 인가받기 전이나 승인에 실패한 사용자는 접속할 수 없도록 제어

## 7. IP 제어

- NAC 솔루션과 공통적인 기술 이용, 기능 비슷
- IP 할당 및 추적
- 정확히 의도된 IP 할당이 아니면 정상적으로 네트워크를 사용하지 못하게 하는 기능

## 8. 접근 통제

- 서버나 데이터베이스에 대한 직접적인 접근을 막고 작업 추적 및 감사를 할 수 있는 접근 통제 솔루션
- 에이전트 기반, 에이전트리스, 배스천 호스트 기반
- 감사, 보안 이유 대응 등을 위해 사용자가 작업한 모든 이력 저장

## 9. VPN

- 사용자 기반의 VPN 서비스 제공
- IPSEC : 주로 네트워크 연결용
- SSLVPN : 사용자가 내부 네트워크에 연결

# 3. 방화벽

## 1. 방화벽의 정의

- 네트워크 중간에 위치해 해당 장비를 통과하는 트래픽을 사전에 주어진 정책 조건에 맞추어 허용하거나 차단하는 장비
- 세션을 인지하는 상태 기반 엔진(Stateful Packet Inspection, SPI) 동작

## 2. 초기 방화벽

- 스테이트리스(Stateless), 패킷 필터(Packet Filter) 방화벽
- 5-튜플(5-Tuple)
    - Source IP : 데이터를 전달하는 출발지 IP
    - Destination IP : 데이터를 전달받는 목적지 IP
    - Protocol No : 프로토콜 번호
    - Source Port : 데이터를 전달하는 출발지의 포트 번호
    - Destination Port : 데이터를 전달받는 목적지 포트 번호

## 3. 현대적 방화벽의 등장(SPI 엔진)

- 상태 기반 방화벽(Stateful Inspection Firewall)

## 4. 방화벽 동작 방식

1. 장비에 패킷이 들어오면 세션 상태 테이블 확인
2. 조건에 맞는 세션 정보가 세션 테이블에 있음 → 포워딩 테이블 확인
3. 조건에 맞는 세션 정보가 세션 테이블에 없음 → 방화벽 정책 확인
4. 방화벽 정책은 맨 위의 정책부터 확인해 최종 정책까지 확인한 후 없을 때 암시적인 거부 규칙 참고 후 차단
5. 허용 규칙이 있으면 내용을 세션 테이블에 작성
6. 포워딩 테이블 확인
7. 조건에 맞는 정보가 포워딩 테이블에 있음 → 적절한 인터페이스로 패킷 포워딩
8. 조건에 맞는 정보가 포워딩 테이블에 없음 → 패킷 폐기

## 5. ALG(Application Layer Gateway)

- 방화벽에서 FTP 액티브 모드를 통과시키기 위해 애플리케이션 프로토콜을 확인하고 필요에 따라 세션을 인지해 포트를 자동으로 열어줌
- PAT(Port Address Translation) 기능이 동작하는 방화벽에서 PAT를 정상적으로 통과하지 못하는 프로토콜들을 자동으로 인지해 애플리케이션 정보 변경 및 세션 테이블 제작

# 4. IPS, IDS

## 1. IPS, IDS의 정의

- IDS(Intrusion Detection System) : 침입 탐지 시스템
    - 공격자가 시스템을 해킹할 때 탐지를 목적으로 개발된 시스템
    - 트래픽을 복제해 검토하고 침입 여부 판별
- IPS(Intrusion Prevention System) : 침입 방지 시스템
    - 공격이 발견되면 직접 차단
    - 트래픽이 지나가는 인라인 상에 장비 배치
    - 세션 이해 가능 여부, 능동적 방어를 위한 어노말리 등 다양한 기능으로 구분
    - NIPS(Network based IPS) → HIPS(Host based IPS)

## 2. IPS, IDS의 동작 방식

### 1. 패턴 매칭 방식

- 패턴 방식, 시그니처 방식, 데이터베이스 방식 방어
- 기존 공격이나 취약점을 통해 공격 방식에 대한 데이터베이스를 습득하고 그 최신 내용을 유지하다가 공격을 파악하는 기술

### 2. 어노말리 공격 방어

- 어노말리 : IPS에서의 화이트리스트 기반 방어 기법
- 분명한 공격으로 파악되지 않더라도 특정 기준 이상의 행위를 이상하다고 판단하고 방어
- 프로파일 어노말리 : 평소 관리자가 정해놓은 기준이나 IPS 장비가 모니터링해 정해진 기준과 다른 행위가 일어나면 공격으로 판단
- 프로토콜 어노말리 : 잘 알려진 포트와 실제로 통신하는 프로토콜이 다를 때, 이것을 파악해 적절히 제어하는 기법

## 3. IPS, IDS의 한계와 극복(NGIPS)

- 플로 엔진 : 패킷을 모아 데이터 형태로 변환해 검사하는 것이 아니라 패킷이 흘러가는 상황을 모니터링해 공격 탐지
- NGIPS(Next Generation IPS) : 애플리케이션 인지, 다양한 시스템과 연동, APT 공격을 방어하기 위한 일부 기능 탑재, 다양한 외부 시스템과 연동

# 5. DDoS 방어 장비

- DoS(Denial of Service) : 정상적인 서비스가 불가능하도록 방해
- DDoS : 다수의 공격자를 만들어 동시에 DoS 공격을 하는 분산형 DoS

## 1. DDoS 방어 장비의 정의

- 단순한 서버 공격에서 네트워크 장비나 DNS 서비스와 같이 인프라 기반 서비스 제공 영역까지 DDoS 공격 확대
- 볼류메트릭 공격 방어
- 트래픽 프로파일링 기법 주로 사용
- 인터넷의 다양한 공격 정보를 수집한 데이터베이스 활용

## 2. DDoS 방어 장비 동작 방식

- DDoS 공격을 탐지해 공격을 수행하는 IP 리스트를 넘겨주면 방어 장비나 ISP 내부에서 이 IP를 버림
- 클라우드 서비스, 회선 사업자 방어 서비스, DDoS 방어 장비 설치

## 3. DDoS 공격 타입

### 1. 볼류메트릭 공격(Volumetric Attack)

- 회선 사용량이나 그 이상의 트래픽을 과도하게 발생시켜 회선을 사용하지 못하도록 방해하는 공격
- 좀비 PC를 이용한 볼류메트릭 공격
    - 증폭 공격 : 공격자가 상대적으로 적은 대역폭으로 중간 리플렉터에 패킷을 보내면 이 트래픽이 증폭되어 피해자 네트워크에 수십 ~ 수백 배의 공격 트래픽이 발생
- NTP 증폭, DNS 증폭, UDP 플러드, TCP 플러드

### 2. 프로토콜 공격(Protocol Attack)

- 3, 4계층 프로토콜 스택의 취약점을 악용해 대상을 액세스할 수 있게 만드는 공격
- 공격 대상이나 중간 위험 리소스의 처리 용량을 모두 사용해 서비스 중단 유발
- 공격 대상 장비의 CPU, 메모리 자원을 고갈시켜 정상적인 서비스가 불가능
- Syn 플러드, Ping of Death

### 3. 애플리케이션 공격(Application Attack)

- 7계층 프로토콜 스택의 약점 악용
- 가장 정교한 공격 및 식별, 완화에 가장 까다로운 공격
- 대상과의 연결을 설정한 후 프로세스와 트랜잭션을 독점해 서버 자원 소모
- HTTP 플러드, DNS 서비스 공격, Slowloris

# 6. VPN(Virtual Private Network)

- 공중망을 이용해 논리적으로 직접 연결한 것처럼 망을 구성하는 기술
- 암호화와 인증과 같은 보안 강화 기술 적용
- IPSEC 보안 기술, IPSEC VPN 기술, SSLVPN 기술

## 1. VPN 동작 방식

- 터널링 기법 : 패킷을 터널링 프로토콜로 감싸 통신하는 기법
- Host to Host 통신 보호
    - 직접 VPN 터널 연동
- Network to Network 통신 보호
    - 특정 네트워크를 가진 두 종단을 연결하는 경우
    - IPSEC 프로토콜 스택
- Host가 Network로 접근할 때 보호
    - 모바일 사용자가 일반 인터넷망을 통해 사내망으로 연결하는 경우
    - IPSEC과 SSL 프로토콜 범용적으로 사용
